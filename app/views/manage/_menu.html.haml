-# = page_title t('.title')

- webconf_controllers = ['custom_bigbluebutton_servers', 'custom_bigbluebutton_rooms', 'custom_bigbluebutton_recordings']

- sites_page = is_on_page('sites')
- manage_users_page = is_on_page('manage', 'users')
- manage_spaces_page = is_on_page('manage', 'spaces')
- manage_recordings_page = is_on_page('manage', 'recordings')
- webconf_page = is_on_page(webconf_controllers)

= content_for :sidebar_menu do
  %ul

    - if can?(:sites, :manage)
      %li{ :class => "#{'active' if sites_page}" }
        = link_to site_path do
          - if sites_page
            = icon_sidebar_arrow
          = t('.general')

    - if can?(:users, :manage)
      %li{ :class => "#{'active' if manage_users_page}" }
        = link_to manage_users_path do
          - if manage_users_page
            = icon_sidebar_arrow
          = t('.users')

    - if can?(:spaces, :manage) && mod_enabled?("spaces")
      %li{ :class => "#{'active' if manage_spaces_page}" }
        = link_to manage_spaces_path do
          - if manage_spaces_page
            = icon_sidebar_arrow
          = t('.spaces')

    - if can?(:manage, BigbluebuttonRecording)
      %li{ :class => "#{'active' if manage_recordings_page}" }
        = link_to manage_recordings_path do
          - if manage_recordings_page
            = icon_sidebar_arrow
          = t('.recordings')

    - if can?(:manage, BigbluebuttonServer) && can?(:manage, BigbluebuttonRoom)
      %li{ :class => "#{'active' if webconf_page}" }
        = link_to bigbluebutton_servers_path do
          - if webconf_page
            = icon_sidebar_arrow
          = t('.webconf')

    - if can?(:resque, :manage)
      %li
        = link_to resque_server_path do
          = t('.resque')
          = icon_external_link
