@import "compass/css3";
@import "compass/typography/links";
@import "definitions";

$dropdown-border-color: #aaa;
$dropdown-bg-color: white;

// the container that has the link (.dropdown-toggle)
// and the menu (.dropdown-menu)
.dropdown {
  position: relative;

  .dropdown-toggle { cursor: pointer; }

  // emphasize the caret on hover and active
  &:hover, &.open {
    .caret { @include opacity(1); }
  }

  // show the menu when the dropdown is open
  &.open .dropdown-menu { display: block; }

  &.open a.dropdown-toggle {
    &, i {
      color: $m-link-color-active;
    }
  }
}

// the arrow in the top of the dropdown menu
@mixin dropdown-menu-arrow($orientation: left) {
  &:before {
    display: inline-block;
    content: '';
    border-left: 7px solid $m-transparent;
    border-right: 7px solid $m-transparent;
    border-bottom: 7px solid $dropdown-border-color;
    border-bottom-color: $dropdown-border-color;
    position: absolute;
    top: -7px;
    @if $orientation == left {
      left: 9px;
    } @else {
      right: 9px;
    }
  }
  &:after {
    content: '';
    display: inline-block;
    border-left: 6px solid $m-transparent;
    border-right: 6px solid $m-transparent;
    border-bottom: 6px solid $dropdown-bg-color;
    position: absolute;
    top: -6px;
    @if $orientation == left {
      left: 10px;
    } @else {
      right: 10px;
    }
  }
}

// the menu itself
ul.dropdown-menu {
  text-align: center;

  > li:not(.divider) {
    transition: all .3s ease;
    a {
      padding: 12px 14px;

      .icon {
        transition: all .3s ease;
        vertical-align: text-top;
        color: $m-text;
        display: inline-block;
        font-size: $m-font-medium;

        &.icon-logout {
          vertical-align: sub;
        }
      }

      &:hover, &:active {
        transition: all .3s ease;
        font-weight: $m-font-weight-bold;
        color: $m-very-light-gray;
        background: $m-color-primary-heavy;
        @include link-colors($m-text, $m-very-light-gray, $m-very-light-gray);
        .icon {
          transition: all .3s ease;
          color: $m-very-light-gray;
        }
      }
    }
  }

  > li.divider {
    margin: 3px 0;
  }

  /* &.arrow-left { @include dropdown-menu-arrow; } */
  /* &.arrow-right { @include dropdown-menu-arrow(right); } */
}
